<app-navbar></app-navbar>
<section id="vehicles" class="vehicles" style="height: 70%;">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="titlepage">
                    <h2>Réparation véhicule</h2>
                    <br><label>{{carRep?.carMark}} {{carRep?.carModel}} {{carRep?.color}}</label><br>
                    <label>Matricule : {{carRep?.numberPlate}}</label>
                    <p>Progression globale de la réparation <b>{{carRep?.globalProgress}}%</b></p>
                    <p style="color: green;">{{message}}</p>
                    <br>
                    <button *ngIf="message != ''" (click)="terminer()" class="btn btn-success">Veuillez cliquer terminer</button>
                </div>
            </div>
        </div>
    </div>

    <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
            <tr>
                <th>Avancement</th>
                <th>Problem</th>
                <th>Status</th>
                <th style="color: red;">{{error}}</th>
            </tr>
        </thead>
        <tbody style="height: 400px !important;">
            <tr *ngFor="let pr of carRep.carProblem; let i=index">
                <td>
                    <p>{{pr.progress}}%</p>
                </td>
                <td>
                    <p class="fw-normal mb-1">{{pr.entitled}}</p>
                </td>
                <td>
                    <p>{{pr.status}}</p>
                </td>
                <td>
                    <form (ngSubmit)="changeProgress(pr.entitled,pr.progress)">
                        <input min="0" max="100" type="number" name={{i}} [(ngModel)]="advance">
                        <button type="submit" class="btn btn-success">
                            valider
                        </button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>

</section>